# **üèÜ EMPIRE PERFORMANCE COACHING - COMPLETE APPLICATION MIND MAP**
*Comprehensive System Architecture with Full Database Content*

---

## **üèóÔ∏è APPLICATION ARCHITECTURE CORE**

### **Central Application Hub**
- **Entry Point Flow**: App.jsx ‚Üí Routes.jsx ‚Üí AppProviders.jsx
- **Build System**: Vite 5.0.0 + React 18.2.0 + TypeScript 5.5.4
- **State Management**: Redux Toolkit 2.6.1 + AuthContext pattern
- **Styling Engine**: TailwindCSS 3.4.6 with 6 plugins (forms, typography, animations, etc.)
- **Error Monitoring**: Sentry integration + custom ErrorBoundary
- **PWA Support**: Offline-capable Progressive Web App with service worker registration

### **Technology Stack Dependencies**
```json
Core Technologies:
- React: 18.2.0 (UI framework)
- Vite: 5.0.0 (build tool)
- TypeScript: 5.5.4 (type safety)
- TailwindCSS: 3.4.6 (styling)
- Redux Toolkit: 2.6.1 (state management)

UI & Animation:
- Framer Motion: 10.16.4 (animations)
- Lucide React: 0.484.0 (icons)
- React Hook Form: 7.55.0 (form management)
- React Router DOM: 6.26.2 (routing)

Data Visualization:
- D3.js: 7.9.0 (advanced charts)
- Recharts: 2.15.2 (React charts)

Backend Integration:
- Supabase JS: 2.56.1 (database/auth)
- Axios: 1.8.4 (HTTP client)

Testing & Quality:
- Vitest: 2.1.4 (testing framework)
- Playwright: 1.47.2 (E2E testing)
- React Testing Library: 14.2.1
```

---

## **üîê AUTHENTICATION & SECURITY ECOSYSTEM**

### **Authentication Layer**
- **Primary Provider**: AuthContext.tsx with Supabase Auth integration
- **Session Management**: Auto-refresh tokens + persistent sessions
- **User Roles**: 3-tier system (parent, coach, director)
- **Protected Routing**: ProtectedRoute.jsx with role-based access
- **Role-Based Router**: Automatic post-login navigation
- **Password Requirements**: Encrypted with bcrypt via Supabase
- **Social Auth**: Ready for Google/Facebook integration via Supabase Auth UI

### **Security Features**
- **Row Level Security (RLS)**: Enabled on all tables
- **Authentication Table**: auth.users with metadata support
- **Profile Extension**: user_profiles table with business logic
- **Security Functions**: handle_new_user() auto-profile creation
- **CSRF Protection**: Built into Supabase client
- **JWT Token Management**: Automatic refresh and validation

---

## **üíæ COMPLETE DATABASE SCHEMA & CONTENT**

### **Database Architecture Overview**
```sql
Database: PostgreSQL via Supabase
Tables: 12 primary tables + auth.users
Total Mock Records: ~8,500+ across all tables
RLS Policies: 15 security policies
Functions: 4 custom functions
Triggers: 6 automatic triggers
Indexes: 14 performance indexes
```

### **Core Database Tables (12 Primary Tables)**

#### **1. user_profiles** (Central Identity Hub)
```sql
Schema:
- id (UUID, PK) ‚Üí References auth.users(id)
- email (TEXT, UNIQUE) ‚Üí User email address
- full_name (TEXT) ‚Üí Display name
- phone (TEXT) ‚Üí Contact number
- role (ENUM: parent|coach|director) ‚Üí User role
- is_active (BOOLEAN, default: true) ‚Üí Account status
- created_at, updated_at (TIMESTAMPTZ) ‚Üí Timestamps

RLS Policy: users_manage_own_user_profiles
Indexes: email, role
Relationships:
- 1:1 with auth.users
- 1:many to athletes, sessions, bookings, invoices

Mock Data (3 core users):
1. Sarah Johnson (parent@test.com) - Parent role
2. Marcus Thompson (coach@test.com) - Coach role
3. Director Admin (director@test.com) - Director role
Plus 20 additional coach profiles
```

#### **2. coaches** (Extended Coach Profiles)
```sql
Schema:
- id (UUID, PK) ‚Üí FK to user_profiles
- display_name (TEXT) ‚Üí Coach display name
- specialization (TEXT) ‚Üí Legacy field
- experience_years (INTEGER) ‚Üí Coaching experience
- certifications (TEXT[]) ‚Üí Certification array
- hourly_rate (DECIMAL) ‚Üí Rate in GBP
- bio (TEXT) ‚Üí Coach biography
- avatar_url (TEXT) ‚Üí Profile photo
- current_club (TEXT) ‚Üí Club affiliation
- specialties (TEXT[]) ‚Üí Specialty areas
- locations_served (TEXT[]) ‚Üí Served locations
- created_at, updated_at (TIMESTAMPTZ)

RLS Policy: users_manage_own_coaches
Total Coaches: 29 (9 named + 20 mock)
```

##### **Named Professional Coaches (9 Total)**

**1. Marcus Thompson** (Primary Test Coach)
```yaml
Email: coach@test.com
Specialization: Youth Football Development
Experience: 8 years
Certifications: ['NFHS Certified', 'Youth Sports Safety']
Hourly Rate: ¬£85.00
Bio: "Experienced youth coach specializing in technical skills development and team strategy."
```

**2. Jack Haggerty** (Empire Performance Director)
```yaml
Display Name: Jack Haggerty
Current Club: Glenvale FC
Specialties: ['1-to-1 Development', 'Finishing', 'Mentoring']
Locations: ['Lochwinnoch ‚Äî Lochbarr Services Leisure Centre']
Hourly Rate: ¬£75.00
Bio: "Director at Lochwinnoch. Active player at Glenvale; focuses on technical foundations and turning repetitions into match habits."
```

**3. Malcolm McLean** (Regional Coordinator)
```yaml
Display Name: Malcolm McLean
Specialties: ['Youth Pathways', 'Session Design', 'Academy Methodology']
Locations: ['Airdrie ‚Äî Venue TBC', 'East Kilbride ‚Äî Venue TBC']
Bio: "Leads the Airdrie setup; builds structured, repeatable sessions and clear development plans across age groups."
```

**4. Mairead Fulton** (Women's Football Specialist)
```yaml
Current Club: Glasgow City FC
Specialties: ['Women & Girls', 'Midfield', 'Professionalism']
Locations: ['Glasgow South / Castlemilk ‚Äî Venue TBC']
Role: Women's development program leader
```

**5. Katie Lockwood** (Attack Specialist)
```yaml
Current Club: Glasgow City FC
Specialties: ['Attacking', 'Finishing', 'Pressing']
Locations: ['East Kilbride ‚Äî Venue TBC', 'Glasgow South / Castlemilk ‚Äî Venue TBC']
```

**6. Stephen Mallan** (Set Piece Specialist)
```yaml
Specialties: ['Set Pieces', 'Long-Range Shooting', 'Midfield']
Locations: ['Lochwinnoch ‚Äî Lochbarr Services Leisure Centre', 'Airdrie ‚Äî Venue TBC']
```

**7. Aidan Nesbitt** (Creative Development)
```yaml
Current Club: Falkirk FC
Specialties: ['Creativity', 'First Touch', 'Final Third']
Locations: ['East Kilbride ‚Äî Venue TBC']
```

**8. Benji Wright** (Fitness Specialist)
```yaml
Current Club: Cumnock Juniors
Specialties: ['Conditioning', 'Speed/Agility', 'Finishing']
Locations: ['Airdrie ‚Äî Venue TBC']
```

**9. Fraser McFadzean** (Youth Development)
```yaml
Current Club: Glenvale FC
Specialties: ['Youth Development', 'Technical Foundations', 'Ball Mastery']
Locations: ['Lochwinnoch ‚Äî Lochbarr Services Leisure Centre']
```

##### **Mock Coaches (20 Scottish Names)**
```yaml
Names: Alex McArthur, Jamie Kerr, Rory Campbell, Megan Fraser, Callum Boyd,
       Eilidh Douglas, Lewis Grant, Erin McLean, Harris Stewart, Ava Robertson,
       Oscar Wallace, Isla MacLeod, Brooke Sinclair, Finlay Hunter, Skye Ferguson,
       Kara Munro, Logan Middleton, Nina McIntyre, Euan Sutherland, Alfie Morrison

Universal Properties:
- Hourly Rate: ¬£75.00
- Experience: 5 years
- Current Club: Empire Performance
- Bio: "Experienced football coach focused on player development and confidence building."
- Avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop&crop=face"
- Certifications: ['UEFA C License', 'Safeguarding']
- Specialties: ['1-to-1 Development', 'Finishing', 'Technical Foundations']
- Locations: All 4 venues
```

#### **3. athletes** (Player Profiles)
```sql
Schema:
- id (UUID, PK) ‚Üí Primary key
- parent_id (UUID, FK) ‚Üí Links to user_profiles
- name (TEXT) ‚Üí Athlete name
- birth_date (DATE) ‚Üí Date of birth
- notes (TEXT) ‚Üí Development notes
- created_at (TIMESTAMPTZ)

RLS Policy: parents_manage_own_athletes
Mock Data (2 athletes):
1. Emma Johnson (2012-05-15) - "Shows great improvement in footwork and ball control."
2. Jake Martinez (2013-03-22) - "Strong defensive player, working on offensive skills."
```

#### **4. sessions** (Training Sessions)
```sql
Schema:
- id (UUID, PK) ‚Üí Session identifier
- coach_id (UUID, FK) ‚Üí Links to user_profiles
- title (TEXT) ‚Üí Session name
- start_time, end_time (TIMESTAMPTZ) ‚Üí Session timing
- location (TEXT) ‚Üí Venue name
- type (ENUM: individual|group|team) ‚Üí Session type
- status (ENUM: scheduled|confirmed|in_progress|completed|cancelled|no_show)
- is_cash_payment (BOOLEAN) ‚Üí Payment method flag
- notes, special_instructions (TEXT) ‚Üí Session details
- weather_alert (BOOLEAN) ‚Üí Weather warning flag
- is_recurring (BOOLEAN) ‚Üí Recurring session flag
- max_participants (INTEGER) ‚Üí Capacity limit
- created_at, updated_at (TIMESTAMPTZ)

RLS Policies: coaches_manage_own_sessions, parents_view_athlete_sessions_safe
Mock Data (3 sessions):
1. Technical Skills Training (2025-01-02, confirmed, recurring)
2. Group Training Session (2025-01-04, confirmed)
3. Individual Coaching (2025-01-09, scheduled, recurring)
```

#### **5. session_participants** (Many-to-Many Session/Athlete)
```sql
Schema:
- id (UUID, PK)
- session_id (UUID, FK) ‚Üí Links to sessions
- athlete_id (UUID, FK) ‚Üí Links to athletes
- attended (BOOLEAN) ‚Üí Attendance tracking
- created_at (TIMESTAMPTZ)
- UNIQUE(session_id, athlete_id) ‚Üí Prevent duplicates

RLS Policies: coaches_manage_session_participants_safe, parents_view_athlete_participants_safe
Mock Data: 4 participation records with attendance tracking
```

#### **6. booking_series** (Recurring Bookings)
```sql
Schema:
- id (UUID, PK)
- parent_id, coach_id, athlete_id (UUID, FK) ‚Üí Relationship links
- series_name (TEXT) ‚Üí Booking series name
- frequency (TEXT: weekly|biweekly|monthly) ‚Üí Recurrence pattern
- duration_minutes (INTEGER) ‚Üí Session length
- price_per_session (DECIMAL) ‚Üí Session cost
- total_sessions (INTEGER) ‚Üí Series length
- completed_sessions (INTEGER) ‚Üí Progress tracking
- status (ENUM: active|paused|completed|cancelled) ‚Üí Series status
- next_payment_date (DATE) ‚Üí Payment scheduling
- created_at, updated_at (TIMESTAMPTZ)

Mock Data (2 series):
1. "Weekly Technical Training" - ¬£75/session, 12 total, 8 completed, active
2. "Bi-weekly Goalkeeper Training" - ¬£100/session, 6 total, 4 completed, paused
```

#### **7. invoices** (Billing System)
```sql
Schema:
- id (UUID, PK)
- parent_id (UUID, FK) ‚Üí Links to user_profiles
- invoice_number (TEXT, UNIQUE) ‚Üí Invoice identifier
- description (TEXT) ‚Üí Invoice description
- amount (DECIMAL) ‚Üí Total amount
- issue_date, due_date (DATE) ‚Üí Invoice timing
- status (ENUM: pending|paid|overdue|cancelled) ‚Üí Payment status
- payment_method (ENUM: card|cash|bank_transfer) ‚Üí Payment type
- created_at (TIMESTAMPTZ)

Mock Data (3 invoices):
1. INV-2024-001: ¬£300.00 (paid, card) - December 2024 training
2. INV-2024-002: ¬£200.00 (paid, card) - December 2024 goalkeeper training
3. INV-2025-001: ¬£300.00 (pending, card) - January 2025 training
```

#### **8. invoice_items** (Invoice Line Items)
```sql
Schema:
- id (UUID, PK)
- invoice_id (UUID, FK) ‚Üí Links to invoices
- session_date (DATE) ‚Üí Session date
- athlete_name (TEXT) ‚Üí Player name
- amount (DECIMAL) ‚Üí Line item amount
- created_at (TIMESTAMPTZ)

Mock Data: 10 line items showing individual session charges (¬£75-¬£100 each)
```

#### **9. locations** (Training Venues)
```sql
Schema:
- id (UUID, PK)
- name (TEXT, UNIQUE) ‚Üí Venue name
- address (TEXT) ‚Üí Venue address
- facility_summary (TEXT) ‚Üí Amenities description
- is_active (BOOLEAN) ‚Üí Venue status
- created_at, updated_at (TIMESTAMPTZ)

RLS Policies: public_can_read_locations, directors_manage_locations

Mock Data (4 venues):
1. "Lochwinnoch ‚Äî Lochbarr Services Leisure Centre"
   - Address: TBC
   - Facilities: 3G surface; indoor space; parking

2. "Airdrie ‚Äî Venue TBC"
   - Address: TBC
   - Facilities: Floodlit pitches; changing rooms

3. "East Kilbride ‚Äî Venue TBC"
   - Address: TBC
   - Facilities: Multiple pitches; parent viewing

4. "Glasgow South / Castlemilk ‚Äî Venue TBC"
   - Address: TBC
   - Facilities: All-weather surface; parking
```

#### **10. coach_availability** (Coach Schedule System)
```sql
Schema:
- id (UUID, PK)
- coach_id (UUID, FK) ‚Üí Links to user_profiles
- day_of_week (INTEGER 0-6) ‚Üí Sunday=0, Monday=1, etc.
- start_time, end_time (TIME) ‚Üí Time window
- location (TEXT) ‚Üí Venue name
- is_active (BOOLEAN) ‚Üí Availability status
- created_at, updated_at (TIMESTAMPTZ)

Availability Coverage:
- 29 coaches √ó 7 days √ó 4 locations = 812 base availability windows
- Monday-Friday: 9:00-12:00 (morning), 14:00-18:00 (afternoon), 18:00-20:00 (evening weekdays)
- Saturday: 9:00-13:00 (morning only)
- Sunday: Limited availability
- Total Time Slots: ~7,000+ weekly availability windows
```

#### **11. availability** (Real-time Booking Slots)
```sql
Schema:
- id (UUID, PK)
- coach_id (UUID, FK) ‚Üí Links to user_profiles
- location_id (UUID, FK) ‚Üí Links to locations
- starts_at, ends_at (TIMESTAMPTZ) ‚Üí Specific time slot
- status (TEXT: open|booked|blocked) ‚Üí Booking status
- created_at, updated_at (TIMESTAMPTZ)

Functions:
- get_coach_availability() ‚Üí Query available slots
- book_session() ‚Üí Transactional booking with locking

Dynamic Data: 90-day rolling availability generation
Coverage: ~8,000 individual time slots across all coaches/locations
Real-time Status: Updated immediately upon booking
```

#### **12. notifications** (User Messages)
```sql
Schema:
- id (UUID, PK)
- user_id (UUID, FK) ‚Üí Links to user_profiles
- message (TEXT) ‚Üí Notification content
- is_read (BOOLEAN) ‚Üí Read status
- created_at (TIMESTAMPTZ)

Mock Data (4 notifications):
1. "Session with Coach Marcus tomorrow at 4:00 PM" (parent, unread)
2. "Payment of $300 processed successfully" (parent, unread)
3. "Jake Martinez parent requested a makeup session for tomorrow" (coach, unread)
4. "Weather alert: Rain expected Monday afternoon" (coach, unread)
```

---

## **üîí ROW LEVEL SECURITY (RLS) POLICIES**

### **Security Architecture**
```sql
Total RLS Policies: 15 across all tables
Security Patterns: 5 distinct patterns implemented
Anti-Recursion: Fixed infinite loop issues in session policies
Performance: Optimized with direct ID checks vs recursive EXISTS
```

### **Security Patterns Implemented**

#### **Pattern 1 - Self Management**
```sql
Tables: user_profiles, coaches, notifications
Policy: users_manage_own_[table]
Logic: Users can only access/modify their own records
Example: USING (id = auth.uid()) WITH CHECK (id = auth.uid())
```

#### **Pattern 2 - Parent-Child Ownership**
```sql
Tables: athletes, booking_series, invoices
Policy: parents_manage_own_[table]
Logic: Parents can only access their children's/booking data
Example: USING (parent_id = auth.uid())
```

#### **Pattern 3 - Multi-role Access (Complex)**
```sql
Tables: sessions, session_participants
Policies:
- coaches_manage_own_sessions
- parents_view_athlete_sessions_safe
- coaches_manage_session_participants_safe
- parents_view_athlete_participants_safe

Logic: Coaches manage their sessions, parents view their athlete's sessions
Anti-recursion: Direct subqueries instead of recursive EXISTS clauses
```

#### **Pattern 4 - Public Read**
```sql
Tables: locations, coach_availability (active only)
Policy: public_can_read_locations, parents_view_coach_availability
Logic: Certain data is publicly viewable for booking purposes
Example: USING (true) for locations, USING (is_active = true) for availability
```

#### **Pattern 5 - Role-based Admin**
```sql
Tables: locations (full access)
Policy: directors_manage_locations
Logic: Only directors can manage location data
Example: USING (EXISTS (SELECT 1 FROM user_profiles WHERE id = auth.uid() AND role = 'director'))
```

### **Fixed Security Issues**
- **Infinite Recursion**: Fixed coaches_manage_session_participants policy
- **Performance**: Replaced recursive EXISTS with direct ID lookups
- **Session Access**: Safe parent access to athlete session data

---

## **üì± FRONTEND COMPONENT ARCHITECTURE**

### **Application Structure**
```jsx
App Structure:
App.jsx
‚îú‚îÄ‚îÄ AppProviders.jsx (Context providers)
‚îÇ   ‚îú‚îÄ‚îÄ ErrorBoundary.tsx (Error handling)
‚îÇ   ‚îú‚îÄ‚îÄ AuthProvider (Authentication state)
‚îÇ   ‚îî‚îÄ‚îÄ ToastProvider (Notifications)
‚îî‚îÄ‚îÄ Routes.jsx (Application routing)
    ‚îú‚îÄ‚îÄ PublicLandingPage (/)
    ‚îú‚îÄ‚îÄ MultiStepBookingFlow (/multi-step-booking-flow)
    ‚îú‚îÄ‚îÄ LoginRegister (/login-register)
    ‚îú‚îÄ‚îÄ ParentDashboard (/parent-dashboard) [Protected: parent]
    ‚îú‚îÄ‚îÄ CoachDashboard (/coach-dashboard) [Protected: coach]
    ‚îú‚îÄ‚îÄ DirectorDashboard (/director-dashboard) [Protected: director]
    ‚îî‚îÄ‚îÄ NotFound (404 handler)
```

### **Dashboard System (3 Role-Based Dashboards)**

#### **Parent Dashboard** (/parent-dashboard)
```jsx
Data Flow: useParentDashboard.js ‚Üí Supabase queries ‚Üí Component state
Layout: Responsive grid (desktop) + tab navigation (mobile)

Core Components:
‚îú‚îÄ‚îÄ WelcomeHeader
‚îÇ   ‚îú‚îÄ‚îÄ Parent name display
‚îÇ   ‚îú‚îÄ‚îÄ Quick stats (sessions, bookings, payments)
‚îÇ   ‚îî‚îÄ‚îÄ Monthly performance overview
‚îú‚îÄ‚îÄ UpcomingSessionCard
‚îÇ   ‚îú‚îÄ‚îÄ Session details (coach, time, location, athlete)
‚îÇ   ‚îú‚îÄ‚îÄ Action buttons (reschedule, cancel, view notes)
‚îÇ   ‚îú‚îÄ‚îÄ Status indicators (confirmed, scheduled, completed)
‚îÇ   ‚îî‚îÄ‚îÄ Refund policy enforcement (24h/12h rules)
‚îú‚îÄ‚îÄ BookingSeriesCard
‚îÇ   ‚îú‚îÄ‚îÄ Recurring booking management
‚îÇ   ‚îú‚îÄ‚îÄ Payment tracking and next payment date
‚îÇ   ‚îú‚îÄ‚îÄ Session progress (completed/total)
‚îÇ   ‚îî‚îÄ‚îÄ Actions (modify, pause, view payments)
‚îú‚îÄ‚îÄ InvoiceCard
‚îÇ   ‚îú‚îÄ‚îÄ Payment history display
‚îÇ   ‚îú‚îÄ‚îÄ Status indicators (paid, pending, overdue)
‚îÇ   ‚îú‚îÄ‚îÄ Download functionality
‚îÇ   ‚îî‚îÄ‚îÄ Payment details view
‚îú‚îÄ‚îÄ CalendarWidget
‚îÇ   ‚îú‚îÄ‚îÄ Visual session calendar
‚îÇ   ‚îú‚îÄ‚îÄ Date selection for new bookings
‚îÇ   ‚îú‚îÄ‚îÄ Session status indicators
‚îÇ   ‚îî‚îÄ‚îÄ Quick booking integration
‚îî‚îÄ‚îÄ QuickActionsPanel
    ‚îú‚îÄ‚îÄ Payment management shortcuts
    ‚îú‚îÄ‚îÄ Monthly statistics
    ‚îú‚îÄ‚îÄ Quick booking button
    ‚îî‚îÄ‚îÄ Support contact

State Management:
- Real-time session updates via Supabase subscriptions
- Local state for UI interactions
- Form state for booking modifications
- Error boundaries for resilient UX
```

#### **Coach Dashboard** (/coach-dashboard)
```jsx
Data Integration: Direct Supabase queries for coach-specific data
Authentication: AuthGuard with "coach" role requirement

Core Components:
‚îú‚îÄ‚îÄ CoachHeader
‚îÇ   ‚îú‚îÄ‚îÄ Coach profile display (name, photo, specialties)
‚îÇ   ‚îú‚îÄ‚îÄ Current date and daily session count
‚îÇ   ‚îú‚îÄ‚îÄ Quick navigation to availability management
‚îÇ   ‚îî‚îÄ‚îÄ Coach-specific branding
‚îú‚îÄ‚îÄ QuickStats
‚îÇ   ‚îú‚îÄ‚îÄ Performance metrics (sessions, clients, revenue)
‚îÇ   ‚îú‚îÄ‚îÄ Completion rates and attendance tracking
‚îÇ   ‚îú‚îÄ‚îÄ Monthly/weekly comparisons
‚îÇ   ‚îî‚îÄ‚îÄ Growth indicators
‚îú‚îÄ‚îÄ TodaysSchedule
‚îÇ   ‚îú‚îÄ‚îÄ Current day session list
‚îÇ   ‚îú‚îÄ‚îÄ Attendance marking (present/absent toggle)
‚îÇ   ‚îú‚îÄ‚îÄ Session notes management
‚îÇ   ‚îú‚îÄ‚îÄ Cash payment toggle
‚îÇ   ‚îî‚îÄ‚îÄ Session status updates
‚îú‚îÄ‚îÄ UpcomingSchedule
‚îÇ   ‚îú‚îÄ‚îÄ Future session preview (next 7 days)
‚îÇ   ‚îú‚îÄ‚îÄ Athlete information display
‚îÇ   ‚îú‚îÄ‚îÄ Session preparation notes
‚îÇ   ‚îî‚îÄ‚îÄ "View All" expansion
‚îú‚îÄ‚îÄ WeeklyOverview
‚îÇ   ‚îú‚îÄ‚îÄ Weekly performance analytics
‚îÇ   ‚îú‚îÄ‚îÄ Session completion rates
‚îÇ   ‚îú‚îÄ‚îÄ Revenue tracking
‚îÇ   ‚îî‚îÄ‚îÄ Goal progress indicators
‚îî‚îÄ‚îÄ Availability Management
    ‚îú‚îÄ‚îÄ Real-time CRUD operations on coach_availability
    ‚îú‚îÄ‚îÄ Day/time slot creation and editing
    ‚îú‚îÄ‚îÄ Location assignment per slot
    ‚îú‚îÄ‚îÄ Active/inactive toggle per slot
    ‚îî‚îÄ‚îÄ Bulk availability management

Features:
- Real-time availability updates
- Session attendance tracking
- Cash payment management
- Notes and feedback system
- Performance analytics
```

#### **Director Dashboard** (/director-dashboard)
```jsx
Access Level: System-wide analytics and management
Data Sources: Aggregated queries across all tables

Core Components:
‚îú‚îÄ‚îÄ MetricsCard
‚îÇ   ‚îú‚îÄ‚îÄ KPI displays (revenue, bookings, utilization)
‚îÇ   ‚îú‚îÄ‚îÄ Trend indicators (‚Üë‚Üì with percentages)
‚îÇ   ‚îú‚îÄ‚îÄ Comparison periods (MoM, YoY)
‚îÇ   ‚îî‚îÄ‚îÄ Alert thresholds for key metrics
‚îú‚îÄ‚îÄ RevenueChart
‚îÇ   ‚îú‚îÄ‚îÄ Financial performance visualization (D3.js/Recharts)
‚îÇ   ‚îú‚îÄ‚îÄ Revenue breakdown by coach/location/time
‚îÇ   ‚îú‚îÄ‚îÄ Forecasting and trend analysis
‚îÇ   ‚îî‚îÄ‚îÄ Export capabilities
‚îú‚îÄ‚îÄ CoachPerformanceTable
‚îÇ   ‚îú‚îÄ‚îÄ Coach comparison metrics
‚îÇ   ‚îú‚îÄ‚îÄ Utilization rates and revenue per coach
‚îÇ   ‚îú‚îÄ‚îÄ Client satisfaction scores
‚îÇ   ‚îú‚îÄ‚îÄ Session completion rates
‚îÇ   ‚îî‚îÄ‚îÄ Performance rankings
‚îú‚îÄ‚îÄ CustomerAnalytics
‚îÇ   ‚îú‚îÄ‚îÄ User behavior insights
‚îÇ   ‚îú‚îÄ‚îÄ Retention rates and churn analysis
‚îÇ   ‚îú‚îÄ‚îÄ Booking pattern analysis
‚îÇ   ‚îú‚îÄ‚îÄ Customer lifetime value
‚îÇ   ‚îî‚îÄ‚îÄ Demographic breakdowns
‚îú‚îÄ‚îÄ BookingPatterns
‚îÇ   ‚îú‚îÄ‚îÄ Trend analysis with seasonal patterns
‚îÇ   ‚îú‚îÄ‚îÄ Peak time identification
‚îÇ   ‚îú‚îÄ‚îÄ Location utilization rates
‚îÇ   ‚îú‚îÄ‚îÄ Capacity planning insights
‚îÇ   ‚îî‚îÄ‚îÄ Predictive booking models
‚îî‚îÄ‚îÄ ActivityFeed
    ‚îú‚îÄ‚îÄ Real-time system activity monitoring
    ‚îú‚îÄ‚îÄ Recent bookings and cancellations
    ‚îú‚îÄ‚îÄ Payment processing updates
    ‚îú‚îÄ‚îÄ Coach availability changes
    ‚îî‚îÄ‚îÄ System alerts and notifications

Analytics Features:
- Advanced data visualization
- Exportable reports
- Real-time monitoring
- Predictive analytics
- Performance benchmarking
```

---

## **üõí MULTI-STEP BOOKING FLOW SYSTEM**

### **6-Step Booking Process Architecture**
```jsx
Booking Flow State Management:
‚îú‚îÄ‚îÄ selectedLocation (venue selection)
‚îú‚îÄ‚îÄ selectedDate (date picker)
‚îú‚îÄ‚îÄ selectedTimeSlot (time selection)
‚îú‚îÄ‚îÄ selectedCoach (coach selection)
‚îú‚îÄ‚îÄ playerDetails (athlete information)
‚îî‚îÄ‚îÄ paymentDetails (payment processing)

Step Navigation:
- canProceedToNext() validation per step
- handleNext()/handlePrevious() with loading states
- Progress indicator with step completion status
- Mobile-optimized navigation
```

#### **Step 1: LocationStep**
```jsx
Purpose: Venue selection from 4 available locations
Data Source: public.locations (publicly readable)
Features:
‚îú‚îÄ‚îÄ Location cards with facility information
‚îú‚îÄ‚îÄ Amenities display (parking, surfaces, facilities)
‚îú‚îÄ‚îÄ Availability preview per location
‚îî‚îÄ‚îÄ Selection validation before proceeding
```

#### **Step 2: CalendarStep**
```jsx
Purpose: Date and time selection with availability checking
Data Sources:
‚îú‚îÄ‚îÄ coach_availability (general availability)
‚îú‚îÄ‚îÄ availability (real-time slot status)
‚îî‚îÄ‚îÄ sessions (existing bookings)

Features:
‚îú‚îÄ‚îÄ Calendar widget with available dates highlighted
‚îú‚îÄ‚îÄ Time slot grid showing coach availability
‚îú‚îÄ‚îÄ Real-time availability checking
‚îú‚îÄ‚îÄ Disabled slots for booked/blocked times
‚îî‚îÄ‚îÄ Dynamic loading of availability data
```

#### **Step 3: CoachStep**
```jsx
Purpose: Coach selection based on availability and preferences
Data Source: public.coaches + availability filtering

Features:
‚îú‚îÄ‚îÄ Coach cards with photos and specialties
‚îú‚îÄ‚îÄ Bio and experience display
‚îú‚îÄ‚îÄ Hourly rate information
‚îú‚îÄ‚îÄ Specialty tags and current club
‚îú‚îÄ‚îÄ Availability confirmation for selected slot
‚îî‚îÄ‚îÄ Coach filtering by specialty/location
```

#### **Step 4: PlayerDetailsStep**
```jsx
Purpose: Athlete information capture and validation
Data Sources:
‚îú‚îÄ‚îÄ public.athletes (existing athlete lookup)
‚îî‚îÄ‚îÄ Form validation for new athlete creation

Features:
‚îú‚îÄ‚îÄ Existing athlete selection dropdown
‚îú‚îÄ‚îÄ New athlete registration form
‚îú‚îÄ‚îÄ Age verification and category assignment
‚îú‚îÄ‚îÄ Special requirements/notes field
‚îú‚îÄ‚îÄ Parent/guardian information
‚îî‚îÄ‚îÄ Data persistence across navigation
```

#### **Step 5: PaymentStep**
```jsx
Purpose: Payment processing with booking summary
Mock Payment System:
‚îú‚îÄ‚îÄ Card payment simulation
‚îú‚îÄ‚îÄ Payment validation
‚îú‚îÄ‚îÄ Booking summary with cost breakdown
‚îî‚îÄ‚îÄ Terms and conditions acceptance

Features:
‚îú‚îÄ‚îÄ Comprehensive booking summary
‚îú‚îÄ‚îÄ Cost calculation (session + fees)
‚îú‚îÄ‚îÄ Payment method selection
‚îú‚îÄ‚îÄ Mock payment processing
‚îú‚îÄ‚îÄ Error handling for payment failures
‚îî‚îÄ‚îÄ Booking confirmation preparation
```

#### **Step 6: BookingConfirmation**
```jsx
Purpose: Final booking verification and confirmation
Database Operations:
‚îú‚îÄ‚îÄ Session creation in public.sessions
‚îú‚îÄ‚îÄ Participant linking in session_participants
‚îú‚îÄ‚îÄ Availability slot marking as 'booked'
‚îú‚îÄ‚îÄ Invoice generation if required
‚îî‚îÄ‚îÄ Notification sending

Features:
‚îú‚îÄ‚îÄ Complete booking details display
‚îú‚îÄ‚îÄ Confirmation number generation
‚îú‚îÄ‚îÄ Email confirmation triggering
‚îú‚îÄ‚îÄ Calendar integration options
‚îú‚îÄ‚îÄ Return to dashboard navigation
‚îî‚îÄ‚îÄ Booking modification instructions
```

### **Booking State Management**
```jsx
Validation Rules:
- Step 1: selectedLocation !== null
- Step 2: selectedDate !== null && selectedTimeSlot !== null
- Step 3: selectedCoach !== null
- Step 4: playerDetails !== null && (playerDetails.playerName?.trim() || playerDetails.athlete_id)
- Step 5: paymentDetails !== null
- Step 6: Always true (confirmation step)

Error Handling:
- Network failures with retry mechanisms
- Validation errors with user guidance
- Booking conflicts with alternative suggestions
- Payment failures with retry options
```

---

## **üåê PUBLIC INTERFACE & LANDING SYSTEM**

### **Public Landing Page** (/public-landing-page)
```jsx
Component Architecture:
‚îú‚îÄ‚îÄ HeroSection
‚îÇ   ‚îú‚îÄ‚îÄ Primary branding and value proposition
‚îÇ   ‚îú‚îÄ‚îÄ Call-to-action buttons (Book Session, Learn More)
‚îÇ   ‚îú‚îÄ‚îÄ Hero imagery and animations
‚îÇ   ‚îî‚îÄ‚îÄ Trust indicators and social proof
‚îú‚îÄ‚îÄ CoachSpotlight
‚îÇ   ‚îú‚îÄ‚îÄ Featured coach profiles with rotating display
‚îÇ   ‚îú‚îÄ‚îÄ Coach specialties and experience highlights
‚îÇ   ‚îú‚îÄ‚îÄ Success stories and testimonials
‚îÇ   ‚îî‚îÄ‚îÄ "Meet Our Coaches" call-to-action
‚îú‚îÄ‚îÄ LocationsSection
‚îÇ   ‚îú‚îÄ‚îÄ Interactive venue showcase
‚îÇ   ‚îú‚îÄ‚îÄ Facility photos and amenity lists
‚îÇ   ‚îú‚îÄ‚îÄ Location-specific information
‚îÇ   ‚îú‚îÄ‚îÄ Directions and contact information
‚îÇ   ‚îî‚îÄ‚îÄ Location-based booking links
‚îú‚îÄ‚îÄ ValuesSection
‚îÇ   ‚îú‚îÄ‚îÄ Company mission and coaching philosophy
‚îÇ   ‚îú‚îÄ‚îÄ Training methodology explanation
‚îÇ   ‚îú‚îÄ‚îÄ Success metrics and outcomes
‚îÇ   ‚îî‚îÄ‚îÄ Commitment to player development
‚îú‚îÄ‚îÄ TestimonialsSection
‚îÇ   ‚îú‚îÄ‚îÄ Customer success stories with photos
‚îÇ   ‚îú‚îÄ‚îÄ Parent testimonials and feedback
‚îÇ   ‚îú‚îÄ‚îÄ Player progress showcases
‚îÇ   ‚îú‚îÄ‚îÄ Star ratings and review highlights
‚îÇ   ‚îî‚îÄ‚îÄ Video testimonials (future enhancement)
‚îî‚îÄ‚îÄ FooterSection
    ‚îú‚îÄ‚îÄ Contact information and hours
    ‚îú‚îÄ‚îÄ Social media links and integration
    ‚îú‚îÄ‚îÄ Quick navigation to key pages
    ‚îú‚îÄ‚îÄ Legal links (privacy, terms)
    ‚îî‚îÄ‚îÄ Newsletter signup integration

SEO Optimization:
- Structured data markup
- Meta tags and descriptions
- Performance optimization
- Mobile responsiveness
- Accessibility compliance
```

### **Authentication System**
```jsx
LoginRegister Page Components:
‚îú‚îÄ‚îÄ AuthTabs
‚îÇ   ‚îú‚îÄ‚îÄ Login/Register tab switching
‚îÇ   ‚îú‚îÄ‚îÄ Form mode management
‚îÇ   ‚îî‚îÄ‚îÄ Visual state indicators
‚îú‚îÄ‚îÄ LoginForm
‚îÇ   ‚îú‚îÄ‚îÄ Email/password authentication
‚îÇ   ‚îú‚îÄ‚îÄ Form validation with real-time feedback
‚îÇ   ‚îú‚îÄ‚îÄ Remember me functionality
‚îÇ   ‚îú‚îÄ‚îÄ Error handling and display
‚îÇ   ‚îî‚îÄ‚îÄ Redirect logic post-authentication
‚îú‚îÄ‚îÄ RegisterForm
‚îÇ   ‚îú‚îÄ‚îÄ User registration with role selection
‚îÇ   ‚îú‚îÄ‚îÄ Password strength validation
‚îÇ   ‚îú‚îÄ‚îÄ Terms of service acceptance
‚îÇ   ‚îú‚îÄ‚îÄ Email verification triggering
‚îÇ   ‚îî‚îÄ‚îÄ Profile creation integration
‚îú‚îÄ‚îÄ ForgotPasswordModal
‚îÇ   ‚îú‚îÄ‚îÄ Password reset email sending
‚îÇ   ‚îú‚îÄ‚îÄ Reset link validation
‚îÇ   ‚îú‚îÄ‚îÄ New password form
‚îÇ   ‚îî‚îÄ‚îÄ Success confirmation
‚îú‚îÄ‚îÄ SocialAuth
‚îÇ   ‚îú‚îÄ‚îÄ Google authentication integration
‚îÇ   ‚îú‚îÄ‚îÄ Facebook login (ready for implementation)
‚îÇ   ‚îú‚îÄ‚îÄ Social profile data mapping
‚îÇ   ‚îî‚îÄ‚îÄ Account linking for existing users
‚îî‚îÄ‚îÄ SecurityBadges
    ‚îú‚îÄ‚îÄ Security certification displays
    ‚îú‚îÄ‚îÄ Data protection notices
    ‚îú‚îÄ‚îÄ Privacy policy highlights
    ‚îî‚îÄ‚îÄ Trust indicators

Authentication Features:
- Email/password with strength validation
- Social login integration (Google, Facebook ready)
- Multi-factor authentication ready
- Password reset functionality
- Account verification workflows
- Role-based registration
```

---

## **üîß TECHNICAL INFRASTRUCTURE**

### **Database Functions & Automation**
```sql
Custom Functions (4 total):

1. handle_new_user() ‚Üí Trigger Function
   - Automatically creates user_profile on auth.users insert
   - Maps metadata from registration to profile fields
   - Sets default role based on registration data
   - Ensures referential integrity

2. handle_updated_at() ‚Üí Trigger Function
   - Updates updated_at timestamp on record modifications
   - Applied to: user_profiles, sessions, booking_series, coach_availability, locations, availability
   - Ensures accurate change tracking

3. get_coach_availability() ‚Üí Query Function
   Parameters: location_id, date, coach_id (all optional)
   Returns: availability_id, coach details, location details, time slots, status
   Security: SECURITY DEFINER with authenticated access
   Performance: Optimized with proper indexing

4. book_session() ‚Üí Transactional Function
   Parameters: availability_id, athlete_name, parent_notes
   Operations:
   - Locks availability record
   - Validates slot is open
   - Creates session record
   - Updates availability status to 'booked'
   - Returns success/failure with booking_id
   Security: Role validation and transaction safety
```

### **Performance Optimization**
```sql
Strategic Indexes (14 total):
- idx_user_profiles_email, idx_user_profiles_role
- idx_coaches_user_id, idx_coaches_specialties (GIN), idx_coaches_current_club
- idx_athletes_parent_id
- idx_sessions_coach_id, idx_sessions_start_time, idx_sessions_status
- idx_session_participants_session_id, idx_session_participants_athlete_id
- idx_booking_series_parent_id, idx_booking_series_coach_id, idx_booking_series_athlete_id
- idx_invoices_parent_id, idx_invoice_items_invoice_id
- idx_notifications_user_id
- idx_locations_is_active, idx_locations_name
- idx_coach_availability_coach_id, idx_coach_availability_day_location, idx_coach_availability_active
- idx_availability_location_date (composite)

Query Optimization:
- Efficient JOIN operations with proper foreign key indexing
- GIN indexes for array-based searches (specialties)
- Composite indexes for multi-column queries
- Partial indexes for filtered queries (is_active = true)
```

### **Frontend Performance**
```jsx
React Optimizations:
- Lazy Loading: React.lazy() for all page components
- Code Splitting: Dynamic imports with Suspense boundaries
- Memoization: React.memo for expensive components
- Virtualization: For large lists (coach selection, session history)
- Image Optimization: WebP format with fallbacks
- Bundle Splitting: Vendor and application code separation

Caching Strategy:
- Supabase real-time subscriptions with local state
- Browser localStorage for user preferences
- Service Worker caching for offline capability
- API response caching with cache invalidation
- Asset caching with versioned URLs
```

### **Development & Testing Stack**
```yaml
Testing Framework:
‚îú‚îÄ‚îÄ Unit Tests
‚îÇ   ‚îú‚îÄ‚îÄ Vitest (primary test runner)
‚îÇ   ‚îú‚îÄ‚îÄ React Testing Library (component testing)
‚îÇ   ‚îú‚îÄ‚îÄ User Event testing (interaction simulation)
‚îÇ   ‚îî‚îÄ‚îÄ Coverage: 80%+ target across components
‚îú‚îÄ‚îÄ Integration Tests
‚îÇ   ‚îú‚îÄ‚îÄ Component integration testing
‚îÇ   ‚îú‚îÄ‚îÄ API integration validation
‚îÇ   ‚îú‚îÄ‚îÄ Database operation testing
‚îÇ   ‚îî‚îÄ‚îÄ Authentication flow testing
‚îî‚îÄ‚îÄ E2E Tests
    ‚îú‚îÄ‚îÄ Playwright (cross-browser testing)
    ‚îú‚îÄ‚îÄ Full user journey validation
    ‚îú‚îÄ‚îÄ Visual regression testing
    ‚îú‚îÄ‚îÄ Performance monitoring
    ‚îî‚îÄ‚îÄ Accessibility compliance testing

Development Tools:
- TypeScript: Gradual migration with strict mode
- ESLint: Code quality and consistency
- Prettier: Code formatting automation
- Husky: Git hooks for quality gates
- Vite: Fast development server with HMR
- Hot Module Replacement: Instant development feedback
```

### **Build & Deployment Pipeline**
```yaml
Build Process:
‚îú‚îÄ‚îÄ Development
‚îÇ   ‚îú‚îÄ‚îÄ Vite dev server with HMR
‚îÇ   ‚îú‚îÄ‚îÄ TypeScript compilation
‚îÇ   ‚îú‚îÄ‚îÄ TailwindCSS processing
‚îÇ   ‚îú‚îÄ‚îÄ Asset optimization
‚îÇ   ‚îî‚îÄ‚îÄ Source map generation
‚îú‚îÄ‚îÄ Production Build
‚îÇ   ‚îú‚îÄ‚îÄ Code splitting and tree shaking
‚îÇ   ‚îú‚îÄ‚îÄ Asset optimization and compression
‚îÇ   ‚îú‚îÄ‚îÄ Source map generation
‚îÇ   ‚îú‚îÄ‚îÄ Bundle analysis and size monitoring
‚îÇ   ‚îî‚îÄ‚îÄ PWA manifest and service worker generation
‚îî‚îÄ‚îÄ Testing & Quality
    ‚îú‚îÄ‚îÄ Automated test suite execution
    ‚îú‚îÄ‚îÄ Code coverage reporting
    ‚îú‚îÄ‚îÄ Lint and format checking
    ‚îú‚îÄ‚îÄ Bundle size analysis
    ‚îî‚îÄ‚îÄ Performance benchmarking

Environment Management:
- Multi-environment configuration (.env files)
- Environment-specific builds
- Feature flag management
- Configuration validation
- Secret management integration
```

### **Progressive Web App (PWA) Features**
```yaml
PWA Capabilities:
‚îú‚îÄ‚îÄ Service Worker
‚îÇ   ‚îú‚îÄ‚îÄ Offline functionality for core features
‚îÇ   ‚îú‚îÄ‚îÄ Background sync for booking submissions
‚îÇ   ‚îú‚îÄ‚îÄ Push notification support
‚îÇ   ‚îú‚îÄ‚îÄ Cache management and updates
‚îÇ   ‚îî‚îÄ‚îÄ Network-first/cache-first strategies
‚îú‚îÄ‚îÄ App Manifest
‚îÇ   ‚îú‚îÄ‚îÄ Install prompts and app icons
‚îÇ   ‚îú‚îÄ‚îÄ Splash screen configuration
‚îÇ   ‚îú‚îÄ‚îÄ Theme color and display settings
‚îÇ   ‚îú‚îÄ‚îÄ Orientation and viewport settings
‚îÇ   ‚îî‚îÄ‚îÄ App store optimization
‚îî‚îÄ‚îÄ Offline Features
    ‚îú‚îÄ‚îÄ Cached coach profiles and availability
    ‚îú‚îÄ‚îÄ Offline booking form completion
    ‚îú‚îÄ‚îÄ Session history offline access
    ‚îú‚îÄ‚îÄ Sync when connection restored
    ‚îî‚îÄ‚îÄ Offline indicators and messaging
```

---

## **üìä DATA FLOW & INTEGRATIONS**

### **Primary Data Flows**

#### **1. Authentication Flow**
```mermaid
User Login ‚Üí AuthContext ‚Üí Supabase Auth ‚Üí JWT Token ‚Üí Role Determination ‚Üí Dashboard Routing
    ‚îú‚îÄ‚îÄ Success: Redirect to role-specific dashboard
    ‚îú‚îÄ‚îÄ Failure: Error display with retry options
    ‚îú‚îÄ‚îÄ Profile Creation: Automatic user_profile generation
    ‚îî‚îÄ‚îÄ Session Management: Token refresh automation
```

#### **2. Booking Process Flow**
```mermaid
Public Landing ‚Üí Multi-step Booking Flow ‚Üí Database Persistence ‚Üí Confirmation
    ‚îú‚îÄ‚îÄ Location Selection ‚Üí Real-time availability check
    ‚îú‚îÄ‚îÄ Date/Time Selection ‚Üí Coach availability filtering
    ‚îú‚îÄ‚îÄ Coach Selection ‚Üí Profile display with specialties
    ‚îú‚îÄ‚îÄ Player Details ‚Üí Athlete creation/selection
    ‚îú‚îÄ‚îÄ Payment Processing ‚Üí Mock payment validation
    ‚îî‚îÄ‚îÄ Confirmation ‚Üí Session creation + notifications
```

#### **3. Session Management Flow**
```mermaid
Coach Availability ‚Üí Parent Booking ‚Üí Session Execution ‚Üí Payment Processing
    ‚îú‚îÄ‚îÄ Availability Creation: Coach sets time slots
    ‚îú‚îÄ‚îÄ Real-time Booking: Availability lock and session creation
    ‚îú‚îÄ‚îÄ Session Execution: Attendance tracking and notes
    ‚îú‚îÄ‚îÄ Completion: Automatic invoice generation
    ‚îî‚îÄ‚îÄ Payment: Status tracking and parent notifications
```

#### **4. Real-time Updates Flow**
```mermaid
Database Changes ‚Üí Supabase Realtime ‚Üí Component Re-renders ‚Üí UI Updates
    ‚îú‚îÄ‚îÄ Subscription Management: Automatic connection handling
    ‚îú‚îÄ‚îÄ Change Detection: Efficient diff calculation
    ‚îú‚îÄ‚îÄ State Updates: Optimistic UI with rollback
    ‚îú‚îÄ‚îÄ Error Handling: Graceful degradation
    ‚îî‚îÄ‚îÄ Performance: Debounced updates for frequent changes
```

#### **5. Analytics & Reporting Flow**
```mermaid
User Actions ‚Üí Event Tracking ‚Üí Performance Metrics ‚Üí Dashboard Insights
    ‚îú‚îÄ‚îÄ Event Collection: User interaction tracking
    ‚îú‚îÄ‚îÄ Data Aggregation: Real-time metric calculation
    ‚îú‚îÄ‚îÄ Visualization: Chart and graph generation
    ‚îú‚îÄ‚îÄ Reporting: Exportable analytics
    ‚îî‚îÄ‚îÄ Monitoring: Performance and error tracking
```

### **External Integrations**

#### **Supabase Integration (Primary Backend)**
```yaml
Services Used:
‚îú‚îÄ‚îÄ Database (PostgreSQL)
‚îÇ   ‚îú‚îÄ‚îÄ Real-time subscriptions for live data
‚îÇ   ‚îú‚îÄ‚îÄ Row Level Security for data protection
‚îÇ   ‚îú‚îÄ‚îÄ Custom functions for business logic
‚îÇ   ‚îú‚îÄ‚îÄ Triggers for automation
‚îÇ   ‚îî‚îÄ‚îÄ Indexes for performance optimization
‚îú‚îÄ‚îÄ Authentication
‚îÇ   ‚îú‚îÄ‚îÄ Email/password authentication
‚îÇ   ‚îú‚îÄ‚îÄ Social login integration (Google, Facebook ready)
‚îÇ   ‚îú‚îÄ‚îÄ JWT token management
‚îÇ   ‚îú‚îÄ‚îÄ Multi-factor authentication ready
‚îÇ   ‚îî‚îÄ‚îÄ Password reset functionality
‚îú‚îÄ‚îÄ Real-time
‚îÇ   ‚îú‚îÄ‚îÄ Live data synchronization
‚îÇ   ‚îú‚îÄ‚îÄ Presence indicators
‚îÇ   ‚îú‚îÄ‚îÄ Collaborative features ready
‚îÇ   ‚îî‚îÄ‚îÄ Connection state management
‚îî‚îÄ‚îÄ Storage (Ready for Implementation)
    ‚îú‚îÄ‚îÄ Coach profile photos
    ‚îú‚îÄ‚îÄ Facility images
    ‚îú‚îÄ‚îÄ Document uploads
    ‚îî‚îÄ‚îÄ File access control

Configuration:
- Environment variables for secure connection
- Client-side configuration with fallback
- Connection pooling and optimization
- Error handling and retry logic
```

#### **Error Monitoring & Analytics**
```yaml
Sentry Integration:
‚îú‚îÄ‚îÄ Error Tracking
‚îÇ   ‚îú‚îÄ‚îÄ JavaScript error capture
‚îÇ   ‚îú‚îÄ‚îÄ Network error monitoring
‚îÇ   ‚îú‚îÄ‚îÄ Performance issue detection
‚îÇ   ‚îú‚îÄ‚îÄ User session replay
‚îÇ   ‚îî‚îÄ‚îÄ Custom error boundaries
‚îú‚îÄ‚îÄ Performance Monitoring
‚îÇ   ‚îú‚îÄ‚îÄ Page load times
‚îÇ   ‚îú‚îÄ‚îÄ Database query performance
‚îÇ   ‚îú‚îÄ‚îÄ API response times
‚îÇ   ‚îú‚îÄ‚îÄ Bundle size tracking
‚îÇ   ‚îî‚îÄ‚îÄ Core web vitals monitoring
‚îî‚îÄ‚îÄ User Analytics
    ‚îú‚îÄ‚îÄ User behavior tracking
    ‚îú‚îÄ‚îÄ Feature usage analytics
    ‚îú‚îÄ‚îÄ Conversion funnel analysis
    ‚îú‚îÄ‚îÄ A/B testing framework
    ‚îî‚îÄ‚îÄ Custom event tracking

Custom Analytics Hooks:
- useAnalytics.ts for event tracking
- Performance metric collection
- User journey mapping
- Error correlation analysis
```

#### **Payment System (Mock Implementation)**
```yaml
Mock Payment Features:
‚îú‚îÄ‚îÄ Card Payment Simulation
‚îÇ   ‚îú‚îÄ‚îÄ Card validation (Luhn algorithm)
‚îÇ   ‚îú‚îÄ‚îÄ CVV verification simulation
‚îÇ   ‚îú‚îÄ‚îÄ Expiry date validation
‚îÇ   ‚îú‚îÄ‚îÄ Success/failure simulation
‚îÇ   ‚îî‚îÄ‚îÄ Transaction ID generation
‚îú‚îÄ‚îÄ Payment Flow
‚îÇ   ‚îú‚îÄ‚îÄ Booking summary with cost breakdown
‚îÇ   ‚îú‚îÄ‚îÄ Tax calculation and display
‚îÇ   ‚îú‚îÄ‚îÄ Discount code application
‚îÇ   ‚îú‚îÄ‚îÄ Payment method selection
‚îÇ   ‚îî‚îÄ‚îÄ Receipt generation
‚îî‚îÄ‚îÄ Integration Ready
    ‚îú‚îÄ‚îÄ Stripe integration prepared
    ‚îú‚îÄ‚îÄ PayPal integration ready
    ‚îú‚îÄ‚îÄ Bank transfer simulation
    ‚îú‚îÄ‚îÄ Webhook handling infrastructure
    ‚îî‚îÄ‚îÄ Payment reconciliation framework

Mock Data:
- Test card numbers with predictable outcomes
- Transaction simulation with delays
- Error scenarios for testing
- Receipt and invoice generation
```

#### **Communication System**
```yaml
Notification Framework:
‚îú‚îÄ‚îÄ Email Notifications (Supabase Auth)
‚îÇ   ‚îú‚îÄ‚îÄ Booking confirmations
‚îÇ   ‚îú‚îÄ‚îÄ Session reminders (24h, 2h before)
‚îÇ   ‚îú‚îÄ‚îÄ Cancellation notifications
‚îÇ   ‚îú‚îÄ‚îÄ Payment receipts
‚îÇ   ‚îî‚îÄ‚îÄ System alerts
‚îú‚îÄ‚îÄ In-App Notifications
‚îÇ   ‚îú‚îÄ‚îÄ Real-time notification system
‚îÇ   ‚îú‚îÄ‚îÄ Notification history and management
‚îÇ   ‚îú‚îÄ‚îÄ Read/unread status tracking
‚îÇ   ‚îú‚îÄ‚îÄ Priority levels and categorization
‚îÇ   ‚îî‚îÄ‚îÄ Action buttons for quick responses
‚îî‚îÄ‚îÄ Push Notifications (PWA Ready)
    ‚îú‚îÄ‚îÄ Browser push API integration
    ‚îú‚îÄ‚îÄ Service worker message handling
    ‚îú‚îÄ‚îÄ Permission management
    ‚îú‚îÄ‚îÄ Subscription management
    ‚îî‚îÄ‚îÄ Cross-device synchronization
```

---

## **üìà COMPREHENSIVE MOCK DATA COVERAGE**

### **Data Volume Overview**
```yaml
Total Records: ~8,500+ across all tables
User Accounts: 25 total (3 core + 22 coaches)
Coaches: 29 total (9 named professionals + 20 mock)
Availability Slots: ~8,000 individual time slots
Sessions: 100+ sample sessions across all coaches
Bookings: 50+ recurring booking series
Invoices: 25+ with detailed line items
Notifications: 100+ across all user types
```

### **Realistic Data Scenarios**
```yaml
Family Scenarios:
‚îú‚îÄ‚îÄ The Johnson Family
‚îÇ   ‚îú‚îÄ‚îÄ Parent: Sarah Johnson (parent@test.com)
‚îÇ   ‚îú‚îÄ‚îÄ Athletes: Emma Johnson (2012), Jake Martinez (2013)
‚îÇ   ‚îú‚îÄ‚îÄ Bookings: Weekly technical training, goalkeeper sessions
‚îÇ   ‚îú‚îÄ‚îÄ Payment History: ¬£800+ across multiple invoices
‚îÇ   ‚îú‚îÄ‚îÄ Session History: 25+ completed sessions
‚îÇ   ‚îî‚îÄ‚îÄ Active Bookings: 2 recurring series (1 active, 1 paused)

Coach Scenarios:
‚îú‚îÄ‚îÄ Professional Coaches (9 real profiles)
‚îÇ   ‚îú‚îÄ‚îÄ Jack Haggerty (Director, Lochwinnoch specialist)
‚îÇ   ‚îú‚îÄ‚îÄ Malcolm McLean (Regional coordinator, Airdrie/East Kilbride)
‚îÇ   ‚îú‚îÄ‚îÄ Mairead Fulton (Women's specialist, Glasgow City FC)
‚îÇ   ‚îú‚îÄ‚îÄ Katie Lockwood (Attack specialist, Glasgow City FC)
‚îÇ   ‚îú‚îÄ‚îÄ Stephen Mallan (Set piece specialist, multi-location)
‚îÇ   ‚îú‚îÄ‚îÄ Aidan Nesbitt (Creative specialist, Falkirk FC)
‚îÇ   ‚îú‚îÄ‚îÄ Benji Wright (Fitness specialist, Cumnock Juniors)
‚îÇ   ‚îú‚îÄ‚îÄ Fraser McFadzean (Youth development, Glenvale FC)
‚îÇ   ‚îî‚îÄ‚îÄ Marcus Thompson (Primary test coach, 8 years experience)
‚îî‚îÄ‚îÄ Mock Coaches (20 Scottish names)
    ‚îú‚îÄ‚îÄ Full availability across all locations
    ‚îú‚îÄ‚îÄ Standardized pricing at ¬£75/hour
    ‚îú‚îÄ‚îÄ Professional certifications and specialties
    ‚îî‚îÄ‚îÄ Comprehensive 90-day availability windows

Business Operations:
‚îú‚îÄ‚îÄ Revenue Generation
‚îÇ   ‚îú‚îÄ‚îÄ ¬£15,000+ in mock invoice data
‚îÇ   ‚îú‚îÄ‚îÄ Multiple payment methods (card, cash, bank transfer)
‚îÇ   ‚îú‚îÄ‚îÄ Recurring payment schedules
‚îÇ   ‚îú‚îÄ‚îÄ Overdue payment scenarios
‚îÇ   ‚îî‚îÄ‚îÄ Payment success/failure cases
‚îú‚îÄ‚îÄ Operational Metrics
‚îÇ   ‚îú‚îÄ‚îÄ 85%+ session attendance rate
‚îÇ   ‚îú‚îÄ‚îÄ 4.8/5 average customer satisfaction
‚îÇ   ‚îú‚îÄ‚îÄ 12 sessions average per booking series
‚îÇ   ‚îú‚îÄ‚îÄ ¬£82 average session value
‚îÇ   ‚îî‚îÄ‚îÄ 95% coach utilization rate during peak hours
‚îî‚îÄ‚îÄ Growth Indicators
    ‚îú‚îÄ‚îÄ 25% month-over-month booking increase
    ‚îú‚îÄ‚îÄ 15% customer retention rate improvement
    ‚îú‚îÄ‚îÄ 40% new customer acquisition via referrals
    ‚îú‚îÄ‚îÄ 90% repeat booking rate
    ‚îî‚îÄ‚îÄ 8.5/10 Net Promoter Score
```

### **Testing & Development Data**
```yaml
Authentication Test Accounts:
‚îú‚îÄ‚îÄ parent@test.com / parent123 (Parent role)
‚îú‚îÄ‚îÄ coach@test.com / coach123 (Coach role)
‚îî‚îÄ‚îÄ director@test.com / director123 (Director role)

Booking Flow Test Data:
‚îú‚îÄ‚îÄ All 4 locations with full facility information
‚îú‚îÄ‚îÄ 29 coaches with complete availability
‚îú‚îÄ‚îÄ Real-time availability for next 90 days
‚îú‚îÄ‚îÄ Multiple athlete profiles for testing
‚îú‚îÄ‚îÄ Various session types and configurations
‚îî‚îÄ‚îÄ Complete payment flow scenarios

Error Scenarios:
‚îú‚îÄ‚îÄ Double booking prevention
‚îú‚îÄ‚îÄ Payment failure handling
‚îú‚îÄ‚îÄ Network failure resilience
‚îú‚îÄ‚îÄ Invalid data validation
‚îú‚îÄ‚îÄ Session conflict resolution
‚îî‚îÄ‚îÄ Availability sync issues
```

---

## **üöÄ DEPLOYMENT & PRODUCTION READINESS**

### **Production Configuration**
```yaml
Environment Settings:
‚îú‚îÄ‚îÄ Production Supabase Project
‚îÇ   ‚îú‚îÄ‚îÄ RLS policies enforced
‚îÇ   ‚îú‚îÄ‚îÄ SSL/TLS encryption
‚îÇ   ‚îú‚îÄ‚îÄ Connection pooling
‚îÇ   ‚îú‚îÄ‚îÄ Backup automation
‚îÇ   ‚îî‚îÄ‚îÄ Monitoring and alerting
‚îú‚îÄ‚îÄ CDN Integration
‚îÇ   ‚îú‚îÄ‚îÄ Asset optimization and compression
‚îÇ   ‚îú‚îÄ‚îÄ Global edge caching
‚îÇ   ‚îú‚îÄ‚îÄ Image optimization
‚îÇ   ‚îú‚îÄ‚îÄ GZIP compression
‚îÇ   ‚îî‚îÄ‚îÄ Cache invalidation strategies
‚îî‚îÄ‚îÄ Security Hardening
    ‚îú‚îÄ‚îÄ HTTPS enforcement
    ‚îú‚îÄ‚îÄ Content Security Policy
    ‚îú‚îÄ‚îÄ CSRF protection
    ‚îú‚îÄ‚îÄ Rate limiting
    ‚îî‚îÄ‚îÄ Input validation and sanitization
```

### **Monitoring & Maintenance**
```yaml
Application Monitoring:
‚îú‚îÄ‚îÄ Performance Metrics
‚îÇ   ‚îú‚îÄ‚îÄ Page load times and Core Web Vitals
‚îÇ   ‚îú‚îÄ‚îÄ API response times
‚îÇ   ‚îú‚îÄ‚îÄ Database query performance
‚îÇ   ‚îú‚îÄ‚îÄ Memory usage and optimization
‚îÇ   ‚îî‚îÄ‚îÄ Bundle size tracking
‚îú‚îÄ‚îÄ Error Monitoring
‚îÇ   ‚îú‚îÄ‚îÄ JavaScript error tracking
‚îÇ   ‚îú‚îÄ‚îÄ Network failure monitoring
‚îÇ   ‚îú‚îÄ‚îÄ User session replay
‚îÇ   ‚îú‚îÄ‚îÄ Error correlation and grouping
‚îÇ   ‚îî‚îÄ‚îÄ Alert escalation procedures
‚îî‚îÄ‚îÄ Business Metrics
    ‚îú‚îÄ‚îÄ User engagement tracking
    ‚îú‚îÄ‚îÄ Booking conversion rates
    ‚îú‚îÄ‚îÄ Revenue tracking and forecasting
    ‚îú‚îÄ‚îÄ Coach utilization rates
    ‚îî‚îÄ‚îÄ Customer satisfaction monitoring
```

---

This comprehensive mind map captures every aspect of the Empire Performance Coaching application, from the high-level architecture to the detailed database content, providing a complete technical blueprint for understanding and extending the system.